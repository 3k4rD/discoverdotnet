@{
	Layout = @"/_Layout.cshtml";
}

<h5 class="mb-0 accent-script text-secondary" style="line-height: 0">Project</h5>
<h1 class="mb-4 font-weight-bold display-4">
    @Model.String("Title") 
</h1>

<b-card class="mb-4">
    <p class="lead">@Model.String("Description")</p>
    @RenderBody()
</b-card>

<b-row>
    <b-col md="9" order="2" order-md="1">
        <b-tabs pills>
            @if(Model.ContainsKey("Readme"))
            {
                <b-tab title="Readme" class="mt-2" active>
                    <b-card>
                        @Html.Raw(Model.String("Readme"))
                    </b-card>
                </b-tab>
            }
            @if(Model.Get<int>("OpenIssuesCount") > 0)
            {
                <b-tab title="Issues">
                    <issues issue-json="/data/issues/@(Model.String("Key")).json"></issues>
                </b-tab>
            }
        </b-tabs>
    </b-col>
    <b-col md="3" order="1" order-md="2">
        <b-card no-body class="mb-4">
            <b-card-body>
                @{
                    string website = Model.String("Website");
                    string source = Model.String("Source");
                    string twitter = Model.String("Twitter");
                    string chat = Model.String("Chat");
                    string package = Model.String("NuGet");
                    if(!string.IsNullOrWhiteSpace(website))
                    {
                        <div class="font-weight-bold">
                            <span class="fa fa-external-link-square-alt"></span> Website
                        </div>
                        <div>
                            <a href="@(website)">{{ '@(website)' | no-protocol }}</a>
                        </div>
                    }    
                    if(!string.IsNullOrWhiteSpace(source))
                    {
                        <div class="font-weight-bold">
                            <span class="fa fa-code"></span> Source
                        </div>
                        <div>
                            <a href="@(source)">{{ '@(source)' | no-protocol }}</a>
                        </div>
                    }
                    if(!string.IsNullOrWhiteSpace(twitter))
                    {
                        <div class="font-weight-bold">
                            <span class="fab fa-twitter"></span> Twitter
                        </div>
                        <div>
                            <a href="https://twitter.com/@(twitter)">@@@(twitter)</a>
                        </div>
                    }
                    if(!string.IsNullOrWhiteSpace(package))
                    {
                        <div class="font-weight-bold">
                            <span class="fa fa-download"></span> NuGet
                        </div>
                        <div>
                            <a href="https://www.nuget.org/packages/@(package)">@(package)</a>
                        </div>
                    }
                }
            </b-card-body>
            @if(Model.ContainsKey("StargazersCount"))
            {
                <b-card-body>
                    <b-row class="text-center">
                        <b-col>
                            <div><i class="fas fa-star"></i></div>
                            <h5>@Model.String("StargazersCount")</h5>
                        </b-col>
                        <b-col>
                            <div><i class="fas fa-code-branch"></i></div>
                            <h5>@Model.String("ForksCount")</h5>
                        </b-col>
                        <b-col>
                            <div><i class="fas fa-bug"></i></div>
                            <h5>@Model.String("OpenIssuesCount")</h5>
                        </b-col>
                    </b-row>
                </b-card-body>
            }
        </b-card>

        <b-card header-text-variant="white" header-bg-variant="dark" class="mb-4">
            <div slot="header">NuGet Statistics</div>
        </b-card>
    </b-col>
</b-row>

<script type="text/javascript">
    Vue.component('issues', httpVueLoader('/components/projects/issues.vue'));
</script>